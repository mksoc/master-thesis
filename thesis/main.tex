\documentclass[%
  corpo=12pt,
  tipotesi=magistrale,
  evenboxes,
  %libro,
  twoside,
  %numerazioneromana,
  %cucitura=7mm,
  english
]{toptesi}

%%% Font %%%
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
%\usepackage{newtxtext}% o altro font
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{inconsolata}
\usepackage{anyfontsize}
\usepackage{siunitx}

%%% Colors %%%
\usepackage[dvipsnames,svgnames,x11names,hyperref,table]{xcolor}
\definecolor{input_blue}{HTML}{0000c8}
\definecolor{output_red}{HTML}{c80000}
\definecolor{width_gray}{HTML}{4b4b4b}
\definecolor{cell_blue}{HTML}{E5F0FF}

%%% Shorthand commands %%%
\usepackage{xspace}
\newcommand{\ooo}{out-of-order\xspace}
\newcommand{\riscv}{RISC-V\xspace}
\newcommand{\lens}{LEN5\xspace}

%%% Set paragraph spacing %%%
\setlength{\parskip}{0pt}

%%% Hyperref %%%
\usepackage{hyperref}
\hypersetup{%
  pdfpagemode={UseOutlines},
  bookmarksopen,
  pdfstartview={FitH},
  colorlinks,
  linkcolor={NavyBlue},
  citecolor={NavyBlue},
  urlcolor={blue}
}
\usepackage[noabbrev]{cleveref}
\crefname{lstlisting}{listing}{listings}
\Crefname{lstlisting}{Listing}{Listings}

%%% Nice tables %%%
\usepackage{booktabs}
\usepackage{array}
\usepackage{multirow}

%%% Acronyms %%%
\usepackage[printonlyused,nohyperlinks]{acronym}

%%% Code listing %%%
\usepackage{listings}
\lstset{%
  basicstyle=\small\ttfamily,
  breaklines=true,
  commentstyle=\color{gray}
}

%%% Figures %%%
%\usepackage{float}
\usepackage{subfig}
\usepackage{rotating}

%%% Utils (can be removed at the end) %%%
\usepackage{todonotes} % pass option 'disable' to hide

\begin{document}
\english 

%%% Front matter %%%
\CorsoDiLaureaIn{Master's Degree in}
\TesiDiLaurea{Master Thesis}
\CandidateName{Candidate}
\AdvisorName{Supervisor}
\def\Candidato{Candidate}

\begin{frontespizio}
    %\ateneo{Politecnico di Torino}
    \logosede[30mm]{img/polito_logo.png}
    \corsodilaurea{Electronic Engineering}
    \titolo{Design of the frontend for LEN5, a RISC-V Out-of-Order processor}
    %\sottotitolo{Sottotitolo}
    \relatore{Prof. Maurizio \textsc{Martina}}
    \sedutadilaurea{Academic year 2018-2019}
    \candidato{Marco \textsc{Andorno}}    
\end{frontespizio}

%%% Abstract %%%
\begin{abstract}
\riscv is a free and open source Instruction Set Architecture, which has sparked interest all over the community of computer architects, as it paves the way for a previously unseen era of extensible software and hardware design freedom, being based on modular and optional ISA extensions, that allow designers to tailor the architecture to their specific needs.

LEN5 is an an open source \riscv core implementing the RV64G instruction set (integer, multiply and divide, floating point and atomic operations), based on Tomasulo's algorithm to schedule its \ooo execution. This choice was made based on the fact that many modern microprocessor feature a dynamically scheduled pipeline, which offers the best performance and ILP exploitation at the cost, however, of high hardware complexity. This work in particular focuses on the frontend of LEN5, that is the part of the core responsible of generating addresses, predicting next directions and fetching instructions from memory to be issued to the execution stages.

The Instruction Fetch Unit (IFU) receives the current PC and interfaces with the instruction cache to read at the required address. Previously read cache lines are saved into line registers which reduce the total number of memory accesses, by allowing next sequential instructions to be immediately read from those registers. Moreover, this unit features a controller which handles both normal fetch operations and pipeline stalls in case of exceptional behavior, cache misses or busy issue queue.

Another significant part of the frontend is the Branch Prediction Unit (BPU), which predicts the direction of branch instructions in order to continue fetching immediately from the next predicted path of instructions. In order to accomplish that, it features a gshare branch predictor, which employs a subset of bits of the current PC and a global history of branch outcomes to perform a prediction. Furthermore, along with branch \emph{direction}, also the branch \emph{destination} address is predicted thanks to a Branch Target Buffer (BTB), which is a small direct mapped cache storing the next address after taken branches, to allow for zero latency branch instructions.

This work is intended as an exploration of such complex \ooo architectures, to actually experience firsthand the main issues and tradeoffs designers must face and to contribute to the growing panorama of open source cores. Moreover, the common hope is for this project to serve as the basis for future in-house development of a complete \riscv-based platform here at Politecnico di Torino, which could be relevant both in teaching and research. As mentioned before, the entire work will be open sourced and available in a GitHub repository.
\end{abstract}

%%% Acknowledgements %%%
\italiano
\ringraziamenti
Ripensando al percorso che mi ha portato fino a questo punto, mi sento di ringraziare innanzitutto tutti i professori di cui ho avuto la possibilità di seguire i corsi per le conoscenze e le competenze che mi hanno aiutato ad acquisire e che saranno alla base della mia futura carriera. In particolare il professor Martina, per avermi dato la possibilità di lavorare a questo stimolante progetto e per aver ascoltato con pazienza i problemi con cui mi sono scontrato, sapendo sempre guidarmi verso la strada migliore.

In seguito, un grazie è dovuto ad Andrea, che dal cuore della Silicon Valley ha avuto l’idea per questo progetto su \riscv e che ha sempre saputo gestire l’andamento dei lavori in modo corretto.

Un grazie particolare lo rivolgo ai miei compagni di viaggio in questo progetto Matteo e Michele, così come a tutti gli altri miei colleghi di questi anni, perché tutte le volte che abbiamo consegnato un lavoro alle due di notte o abbiamo avuto paura insieme per gli esami il giorno dopo, alla fine ci siamo sempre divertiti e abbiamo vissuto momenti che ricorderemo per molto tempo.

Fuori dal mondo accademico, grazie ai miei genitori per il supporto incondizionato che mi hanno sempre offerto in ogni mia scelta, per i saggi consigli che mi hanno saputo dispensare e per avermi messo in condizione di poter portare a termine al meglio questo percorso, concentrandomi esclusivamente sui miei obiettivi.

Grazie a Noemi, per essere stata sempre al mio fianco e per aver gioito con me ad ogni successo, per avermi sempre messo di fronte la realtà in modo obiettivo quando mi sono trovato a prendere delle decisioni e per avermi sopportato nei momenti di massimo impegno.

Infine grazie a tutti i nonni, quelli che non ci sono più, ma che avrebbero voluto vedermi ancora una volta raggiungere un traguardo così importante e quelli che ci sono ancora e che costantemente mi fanno sentire il loro amore e il loro appoggio.
\vspace{1.5cm}
\begin{flushright}
  Marco
\end{flushright}

\english

%%% Indices %%%
\figurespagetrue
\tablespagetrue
\indici
\input{acronyms.tex}
%\lstlistoflistings

%%% Chapters %%%
\input{introduction.tex}
\input{sota.tex}
\input{bp.tex}
\input{design.tex}
\input{results.tex}
\input{conclusions.tex}

%%% Bibliography %%%
\input{biblio.tex}

\end{document}